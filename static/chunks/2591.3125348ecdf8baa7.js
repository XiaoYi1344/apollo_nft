"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2591],{22591:(e,r,t)=>{t.d(r,{CC:()=>w,Fu:()=>p,Pg:()=>g,Rd:()=>k,U0:()=>d,VX:()=>c,XA:()=>h,lk:()=>u,zN:()=>y});var n=t(53455),a=t(99776),i=t(80549),o=t(24103),s=t(12115);let l={staleTime:6e4,retry:1},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,n.I)({queryKey:["products",e],queryFn:async()=>{let{products:r}=await o.AS(e);return r},...l})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,n.I)({queryKey:["ownedProducts",e],queryFn:async()=>{let{ownedProducts:r}=await o.jW(e);return r},...l})},u=e=>(0,n.I)({queryKey:["product",e],queryFn:async()=>{let{products:r}=await o.AS(),t=r.find(r=>r.id===e);if(t)return t;let{ownedProducts:n}=await o.jW();return n.find(r=>r.id===e)},enabled:!!e,...l}),d=e=>(0,n.I)({queryKey:["productActivity",e],queryFn:()=>o.fc(e),enabled:!!e,...l}),y=function(e){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,n.I)({queryKey:["productsByCollection",e,t,a],queryFn:async()=>{let{products:r}=await o.IQ(e,t,a);return r.map(e=>{var r;return{...e,totalInstock:"totalInstock"in e&&"number"==typeof e.totalInstock?e.totalInstock:null!=(r=e.instock)?r:0}})},enabled:!!e&&r,...l})},g=()=>{let e=(0,a.jE)();return(0,i.n)({mutationFn:o.WY,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["ownedProducts"]})}})},w=()=>{let e=(0,a.jE)();return(0,i.n)({mutationFn:o.vc,onSuccess:(r,t)=>{e.invalidateQueries({queryKey:["product",Number(t.id)]}),e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["ownedProducts"]})}})},h=()=>{let e=(0,a.jE)();return(0,i.n)({mutationFn:o.O6,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["ownedProducts"]})}})};function k(e,r){return(0,s.useMemo)(()=>r.length?e.filter(e=>{let t=null!=e.listingId&&e.listingId>0,n=null!=e.auctionId&&e.auctionId>0;return!!((r.includes("Buy Now")||r.includes("Has Offers"))&&t||r.includes("On Auction")&&n)}):e,[e,r])}},24103:(e,r,t)=>{t.d(r,{AS:()=>y,IQ:()=>h,NO:()=>m,O6:()=>d,WY:()=>p,cw:()=>v,fc:()=>k,jW:()=>w,vc:()=>u});var n=t(95125),a=t(72378);let i="https://d5ffe0dc8ad8.ngrok-free.app".replace(/\/$/,"")+"/api",o=new Map,s=()=>{let e=a.A.get("accessToken");return e?{Authorization:"Bearer ".concat(e)}:(console.warn("Access token missing!"),{})},l=e=>null==e?[]:Array.isArray(e)?e:[e],c=e=>{if(!e)return[];if(Array.isArray(e))return e;if("string"==typeof e)try{let r=JSON.parse(e);return Array.isArray(r)?r:[]}catch(e){}return[]},p=async e=>{let r=new FormData;if(r.append("name",e.name),r.append("description",e.description),r.append("supply",String(e.supply)),r.append("blockchain",e.blockchain),r.append("isFreeze",String(e.isFreeze)),r.append("price",e.price),e.externalLink&&r.append("externalLink",e.externalLink),e.properties&&r.append("properties",JSON.stringify(e.properties)),"string"==typeof e.image){let t=await (await fetch(e.image)).blob();r.append("image",new File([t],"image.png"))}else r.append("image",e.image);return(await n.A.post("".concat(i,"/product"),r,{headers:{...s(),"Content-Type":"multipart/form-data"}})).data},u=async e=>{let r=new FormData;return r.append("id",e.id),e.name&&r.append("name",e.name),e.description&&r.append("description",e.description),e.externalLink&&r.append("externalLink",e.externalLink),e.blockchain&&r.append("blockchain",e.blockchain),e.price&&r.append("price",e.price),void 0!==e.supply&&r.append("supply",String(e.supply)),void 0!==e.isFreeze&&r.append("isFreeze",String(e.isFreeze)),e.properties&&r.append("properties",JSON.stringify(e.properties)),e.image&&r.append("image",e.image),(await n.A.put("".concat(i,"/product"),r,{headers:{...s(),"Content-Type":"multipart/form-data"}})).data},d=async e=>(await n.A.put("".concat(i,"/product/buy-product"),e,{headers:{...s(),"ngrok-skip-browser-warning":"true"}})).data,y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=a.A.get("account")||"",[t,...o]=(await n.A.get("".concat(i,"/product/get-all"),{params:{addressWallet:r||void 0,page:e},headers:{...s(),"ngrok-skip-browser-warning":"true"}})).data.data;return{pagination:t,products:o.map(e=>{var r;return{...e,properties:c(e.properties),creator:l(e.creator),seller:l(e.seller),collections:null!=(r=e.collections)?r:void 0}})}},g=n.A.create({baseURL:i,headers:{"ngrok-skip-browser-warning":"true"}});g.interceptors.response.use(e=>e,e=>{var r;return(null==(r=e.response)?void 0:r.status)===401&&console.error("Unauthorized! Token missing or expired."),Promise.reject(e)});let w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1?arguments[1]:void 0,t={page:e};r&&(t.wallet=r);let n=(await g.get("/product/get-all-owned",{params:t,headers:s()})).data.data.ownedProducts;if(!n||0===n.length)return{pagination:{page:1,limit:0,total:0,totalPages:0},ownedProducts:[]};let[a,...i]=n;return{pagination:a,ownedProducts:i.map(e=>{var r,t;return{...e,properties:c(e.properties),creator:l(e.creator),seller:l(e.seller),totalInstock:null!=(t=null!=(r=e.instock)?r:e.supply)?t:0,collections:Array.isArray(e.collections)?e.collections:void 0,ownerships:Array.isArray(e.ownerships)?e.ownerships:void 0}})}},h=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=(await n.A.get("".concat(i,"/product/get-by-collection"),{params:{collectionId:e,addressWallet:r,page:t},headers:{...s(),"ngrok-skip-browser-warning":"true"}})).data.data;if(!Array.isArray(a)||a.length<2)return{pagination:{page:1,limit:0,total:0,totalPages:0},products:[]};let[o,...p]=a;return{pagination:o,products:p.map(e=>({...e,properties:c(e.properties),creator:l(e.creator),seller:l(e.seller),collections:Array.isArray(e.collections)?e.collections:void 0}))}},k=async e=>{if(o.has(e))return o.get(e);let r=await n.A.get("".concat(i,"/activity/get-all/").concat(e),{headers:{...s(),"ngrok-skip-browser-warning":"true"}});return o.set(e,r.data.data),r.data.data},m=async()=>{let e=(await n.A.get("".concat(i,"/product/get-all-owned"),{headers:{...s(),"ngrok-skip-browser-warning":"true"}})).data.data,r=e=>{if(!e||e.length<2)return[];let[,...r]=e;return r.map(e=>{var r,t;return{...e,properties:c(e.properties),creator:l(e.creator),seller:l(e.seller),collections:Array.isArray(e.collections)?e.collections:void 0,ownerships:Array.isArray(e.ownerships)?e.ownerships:void 0,totalInstock:null!=(t=null!=(r=e.instock)?r:e.supply)?t:0}})};return{ownedProducts:r(e.ownedProducts),soldProducts:r(e.soldProducts)}},v=async e=>(await n.A.put("".concat(i,"/product/cancel-product"),e,{headers:{...s()}})).data}}]);