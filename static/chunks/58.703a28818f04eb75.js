"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58],{28046:(e,t,a)=>{a.d(t,{C:()=>o});var n=a(53455),l=a(95125),r=a(72378);let s=l.A.create({baseURL:"https://d5ffe0dc8ad8.ngrok-free.app",headers:{"ngrok-skip-browser-warning":"true"}}),i={getAllCategories:async e=>(await s.get("/api/category-new/get-all?type=".concat(e),{headers:(()=>{let e=r.A.get("accessToken")||localStorage.getItem("accessToken");return e?{Authorization:"Bearer ".concat(e)}:{}})()})).data.data};function o(e){return(0,n.I)({queryKey:["categories",e],queryFn:()=>i.getAllCategories(e)})}},90058:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(95155),l=a(12115),r=a(98638),s=a(41942),i=a(80317),o=a(66088),c=a(75970),u=a(50355),d=a(88612),f=a(27855),h=a(56120),g=a(80223),x=a(54463),p=a(31512),A=a(6388),b=a(28046),w=a(93366),v=a(44517);let y=()=>{let[e,t]=(0,l.useState)(""),[a,y]=(0,l.useState)(""),[j,m]=(0,l.useState)(""),[P,k]=(0,l.useState)(""),[N,T]=(0,l.useState)("draft"),{data:C,isLoading:S}=(0,b.C)("news"),{data:I,isLoading:q,refetch:L}=(0,w.Gl)(),W=(null==I?void 0:I.pages.flatMap(e=>e.data))||[],z=(0,w.ne)(),K=W.length,E=W.filter(e=>"published"===e.status).length,F=W.filter(e=>"draft"===e.status).length,_=W.reduce((e,t)=>e+(t.views||0),0);return S||q?(0,n.jsx)(r.A,{}):(0,n.jsxs)(s.A,{spacing:6,sx:{px:6,py:4,minHeight:"100vh",background:"#12192b",color:"#fff"},children:[(0,n.jsx)(i.A,{variant:"h4",sx:{fontWeight:800},children:"Quản l\xfd News"}),(0,n.jsx)(o.A,{container:!0,spacing:4,children:[{label:"Tổng News",value:K},{label:"Đ\xe3 xuất bản",value:E},{label:"Draft",value:F},{label:"Tổng lượt xem",value:_}].map(e=>(0,n.jsxs)(o.A,{size:{xs:6,md:3},children:[(0,n.jsx)(i.A,{sx:{fontSize:24,fontWeight:700},children:e.value}),(0,n.jsx)(i.A,{sx:{color:"#9b9bbf",fontSize:14},children:e.label})]},e.label))}),(0,n.jsxs)(c.A,{sx:{p:4,background:"#1e244b"},children:[(0,n.jsx)(i.A,{variant:"h6",sx:{mb:2},children:"Tạo News Mới"}),(0,n.jsxs)(s.A,{spacing:2,children:[(0,n.jsx)(u.A,{label:"Ti\xeau đề",value:e,onChange:e=>t(e.target.value),fullWidth:!0,InputLabelProps:{style:{color:"#fff"}},InputProps:{style:{color:"#fff"}}}),(0,n.jsx)(u.A,{label:"M\xf4 tả",value:a,onChange:e=>y(e.target.value),fullWidth:!0,InputLabelProps:{style:{color:"#fff"}},InputProps:{style:{color:"#fff"}}}),(0,n.jsx)(u.A,{label:"Nội dung",value:j,onChange:e=>m(e.target.value),multiline:!0,rows:4,fullWidth:!0,InputLabelProps:{style:{color:"#fff"}},InputProps:{style:{color:"#fff"}}}),(0,n.jsx)(u.A,{select:!0,label:"Chọn danh mục",value:P,onChange:e=>k(e.target.value),fullWidth:!0,InputLabelProps:{style:{color:"#fff"}},SelectProps:{style:{color:"#fff"}},children:null==C?void 0:C.map(e=>(0,n.jsx)(d.A,{value:e.id,children:e.name},e.id))}),(0,n.jsxs)(u.A,{select:!0,label:"Trạng th\xe1i",value:N,onChange:e=>T(e.target.value),fullWidth:!0,InputLabelProps:{style:{color:"#fff"}},SelectProps:{style:{color:"#fff"}},children:[(0,n.jsx)(d.A,{value:"draft",children:"Draft"}),(0,n.jsx)(d.A,{value:"published",children:"Published"})]}),(0,n.jsx)(f.A,{variant:"contained",sx:{background:"linear-gradient(90deg,#7a3bff,#b78eff)",textTransform:"none"},onClick:()=>{if(!e||!a||!j||!P)return void v.Ay.error("Vui l\xf2ng điền đầy đủ th\xf4ng tin");z.mutate({title:e,description:a,content:j,categoryId:P,status:N},{onSuccess:()=>{v.Ay.success("Tạo news th\xe0nh c\xf4ng!"),t(""),y(""),m(""),k(""),T("draft"),L()},onError:()=>v.Ay.error("Tạo news thất bại")})},children:"Tạo News"})]})]}),(0,n.jsxs)(c.A,{sx:{p:4,background:"#1e244b"},children:[(0,n.jsx)(i.A,{variant:"h6",sx:{mb:2},children:"Bảng News"}),(0,n.jsxs)(h.A,{sx:{color:"#fff"},children:[(0,n.jsx)(g.A,{children:(0,n.jsxs)(x.A,{children:[(0,n.jsx)(p.A,{sx:{color:"#fff"},children:"Ti\xeau đề"}),(0,n.jsx)(p.A,{sx:{color:"#fff"},children:"Trạng th\xe1i"}),(0,n.jsx)(p.A,{sx:{color:"#fff"},children:"Danh mục"}),(0,n.jsx)(p.A,{sx:{color:"#fff"},children:"Views"}),(0,n.jsx)(p.A,{sx:{color:"#fff"},children:"Ng\xe0y xuất bản"})]})}),(0,n.jsx)(A.A,{children:W.map(e=>{var t;return(0,n.jsxs)(x.A,{hover:!0,children:[(0,n.jsx)(p.A,{children:e.title}),(0,n.jsx)(p.A,{children:e.status}),(0,n.jsx)(p.A,{children:(null==(t=e.category)?void 0:t.name)||"-"}),(0,n.jsx)(p.A,{children:e.views}),(0,n.jsx)(p.A,{children:e.publishedAt||"-"})]},e.id)})})]})]})]})}},93366:(e,t,a)=>{a.d(t,{ne:()=>h,p$:()=>d,Gl:()=>f});var n=a(67364),l=a(99776),r=a(80549),s=a(95125),i=a(72378);let o=()=>{let e=i.A.get("accessToken")||localStorage.getItem("accessToken");return e?{Authorization:"Bearer ".concat(e)}:{}},c=s.A.create({baseURL:"https://d5ffe0dc8ad8.ngrok-free.app",headers:{"ngrok-skip-browser-warning":"true"}}),u={getAllNews:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(await c.get("/api/news/get-all?page=".concat(e))).data},getOwnedNews:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(await c.get("/api/news/get-owned-new?page=".concat(e),{headers:o()})).data},createNews:async e=>(await c.post("/api/news",e,{headers:o()})).data.data};function d(){return(0,n.q)({queryKey:["news"],queryFn:e=>{let{pageParam:t}=e;return u.getAllNews("number"==typeof t?t:1)},getNextPageParam:(e,t)=>e.totalPages>t.length?t.length+1:void 0,initialPageParam:1})}function f(){return(0,n.q)({queryKey:["owned-news"],queryFn:e=>{let{pageParam:t}=e;return u.getOwnedNews("number"==typeof t?t:1)},getNextPageParam:(e,t)=>e.totalPages>t.length?t.length+1:void 0,initialPageParam:1})}function h(){let e=(0,l.jE)();return(0,r.n)({mutationFn:u.createNews,onSuccess:()=>{e.invalidateQueries({queryKey:["news"]}),e.invalidateQueries({queryKey:["owned-news"]})}})}}}]);