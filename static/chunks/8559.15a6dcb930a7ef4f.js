"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8559],{14763:(e,t,a)=>{a.d(t,{Go:()=>l,Qc:()=>u,cM:()=>g,sb:()=>c,wN:()=>d});var r=a(53455),n=a(99776),o=a(80549),i=a(28153);let s={staleTime:6e4,retry:1},l=e=>(0,r.I)({queryKey:["userProfile",e],queryFn:()=>i.Ay.getUserProfileByWallet(e),enabled:!!e,...s}),d=e=>(0,r.I)({queryKey:["userProfile",e],queryFn:async()=>{let t=await i.Ay.getUserProfileByWallet(e);return null==t?void 0:t.userName},enabled:!!e,...s}),c=()=>(0,r.I)({queryKey:["myProfile"],queryFn:()=>i.Ay.getUserProfile(),...s}),u=()=>{let e=(0,n.jE)();return(0,o.n)({mutationFn:e=>i.Ay.updateUser(e),onSuccess:t=>{e.setQueryData(["myProfile"],t)}})},g=()=>{let e=(0,n.jE)();return(0,o.n)({mutationFn:e=>i.Ay.updateUserBackground(e),onSuccess:t=>{e.setQueryData(["myProfile"],t)}})}},28153:(e,t,a)=>{a.d(t,{Ay:()=>s});var r=a(95125),n=a(72378);let o="https://d5ffe0dc8ad8.ngrok-free.app/api",i=()=>{let e=n.A.get("accessToken");return e?{Authorization:"Bearer ".concat(e)}:{}},s={getUserProfile:async()=>(await r.A.get("".concat(o,"/user"),{headers:{...i(),"ngrok-skip-browser-warning":"true"}})).data.data,getUserProfileByWallet:async e=>{let t=n.A.get("account")||"";return(await r.A.get("".concat(o,"/user/get-profile"),{params:{addressWallet:e,myAddressWallet:t||void 0},headers:{...i(),"ngrok-skip-browser-warning":"true"}})).data.data},updateUser:async e=>{let t=new FormData;return t.append("userName",e.userName),t.append("fullName",e.fullName),t.append("bio",e.bio),e.avatar&&t.append("avatar",e.avatar),(await r.A.put("".concat(o,"/user"),t,{headers:{...i(),"ngrok-skip-browser-warning":"true","Content-Type":"multipart/form-data"}})).data.data},updateUserBackground:async e=>{let t=new FormData;return t.append("image",e.image),(await r.A.put("".concat(o,"/user/update-background"),t,{headers:{...i(),"ngrok-skip-browser-warning":"true","Content-Type":"multipart/form-data"}})).data.data},getUserAvatar:e=>"https://res.cloudinary.com/dr6cnnvma/image/upload/v1763370298/".concat(e,".png")}},65836:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(95155),n=a(12115),o=a(41574),i=a(86627),s=a(15239);let l=n.memo(e=>{let{src:t,type:a="banner",alt:l="User",size:d=120}=e,[c,u]=(0,n.useState)(!1),g="banner"===a?"/banner-default.png":"/avatar-default.png",f=(0,n.useMemo)(()=>{if(!c&&t){let e="/api/proxy-image?url=".concat(encodeURIComponent(t));return"banner"===a?"".concat(e,"&banner=true"):e}return g},[c,t,a,g]);return"banner"===a?(0,r.jsx)(o.default,{sx:{width:"100%",height:320,backgroundImage:"url(".concat(f,")"),backgroundSize:"cover",backgroundPosition:"center",filter:"brightness(0.95)"},children:t&&!c&&(0,r.jsx)(s.default,{src:f,alt:l,width:1e3,height:320,style:{display:"none"},onError:()=>u(!0),loading:"lazy"})}):(0,r.jsx)(i.A,{src:f,alt:l,sx:{width:d,height:d,border:"5px solid rgba(255,255,255,0.2)",boxShadow:"0 4px 25px rgba(0,0,0,0.5)"},onError:()=>u(!0)})})},84342:(e,t,a)=>{a.d(t,{J2:()=>d,QI:()=>s,nk:()=>c});var r=a(95125),n=a(72378);let o={"ngrok-skip-browser-warning":"true"},i=()=>n.A.get("accessToken")||"",s=()=>n.A.get("account")||"",l=r.A.create({baseURL:"https://d5ffe0dc8ad8.ngrok-free.app/api",headers:o}),d={toggleLike:async e=>(await l.post("/like",e,{headers:{...o,Authorization:"Bearer ".concat(i()),addressWallet:s()}})).data,getAllLiked:async e=>(await l.get("/like/get-all?targetType=".concat(e),{headers:{...o,Authorization:"Bearer ".concat(i()),addressWallet:s()}})).data},c={toggleFollow:async e=>(await l.post("/follow",e,{headers:{...o,Authorization:"Bearer ".concat(i()),addressWallet:s()}})).data,getAllFollowed:async()=>(await l.get("/follow/get-all",{headers:{...o,Authorization:"Bearer ".concat(i()),addressWallet:s()}})).data}},93531:(e,t,a)=>{a.d(t,{L:()=>i});var r=a(99776),n=a(80549),o=a(84342);function i(){let e=(0,r.jE)();return(0,n.n)({mutationFn:e=>o.J2.toggleLike(e),onMutate:async t=>{let a={nft:["nft",t.targetId],artist:["artist",t.targetId],post:["post",t.targetId],comment:["comment",t.targetId]}[t.targetType];await e.cancelQueries({queryKey:a});let r=e.getQueryData(a);return r&&e.setQueryData(a,e=>e?{...e,isLike:!e.isLike,likeCount:e.isLike?e.likeCount-1:e.likeCount+1}:e),{previousData:r}},onError:(t,a,r)=>{let n={nft:["nft",a.targetId],artist:["artist",a.targetId],post:["post",a.targetId],comment:["comment",a.targetId]}[a.targetType];(null==r?void 0:r.previousData)&&e.setQueryData(n,r.previousData)},onSettled:(t,a,r)=>{let n={nft:["nft",r.targetId],artist:["artist",r.targetId],post:["post",r.targetId],comment:["comment",r.targetId]};e.invalidateQueries({queryKey:n[r.targetType]})}})}},98559:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var r=a(95155),n=a(12115),o=a(41942),i=a(98638),s=a(80317),l=a(66088),d=a(43791),c=a(41574),u=a(27855),g=a(50301),f=a(59300),p=a(75416),x=a(70539),h=a(24508),m=a(24627),b=a(20063),A=a(76541),y=a(90335),k=a(56116),w=a(83523),v=a(14763),j=a(84342),I=a(65836),C=a(22591),F=a(24103),W=a(11515),z=a(93531),T=a(96021),L=a(9115);let P=e=>{var t;let{onBack:a,addressWallet:P}=e,S=(0,b.useParams)(),U=null!=P?P:null==S?void 0:S.addressWallet,{mutate:R}=(0,z.L)(),{data:B,isLoading:E,isError:N}=(0,v.Go)(U),[Q,q]=(0,n.useState)("created"),[D,K]=(0,n.useState)(0),{followed:H,loading:M,toggleFollow:_}=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,a]=(0,n.useState)(e),[r,o]=(0,n.useState)(!1),i=(0,n.useCallback)(async e=>{if(!r)try{o(!0);let t=await j.nk.toggleFollow(e);a(t.followed)}catch(e){console.error("Toggle follow failed:",e)}finally{o(!1)}},[r]);return{followed:t,loading:r,toggleFollow:i}}((null==B?void 0:B.isFollow)||!1),[G,J]=(0,n.useState)(H),[O,X]=(0,n.useState)(!1),[V,Y]=(0,n.useState)(0);(0,n.useEffect)(()=>{B&&(J(B.isFollow),Y(B.likeCount))},[B,H]);let Z=(0,C.XA)(),$="https://d5ffe0dc8ad8.ngrok-free.app",ee=(null==B?void 0:B.ownedProducts.filter(e=>e.properties.some(e=>null!=e.tokenId&&"0"!==e.tokenId)))||[],et=(null==B?void 0:B.ownedProducts)||[],ea=null!=(t=null==B?void 0:B.collectionProducts)?t:[],er=(0,W.E)({queries:ea.map(e=>({queryKey:["collection-products",e.id],queryFn:()=>(0,F.IQ)(e.id),enabled:"collection"===Q,refetchOnWindowFocus:!1}))}).filter(e=>e.data&&Array.isArray(e.data.products)).flatMap(e=>(e.data.products||[]).map(e=>{var t,a,r,n,o;return{id:e.id,name:e.name,description:e.description,image:e.image,externalLink:null!=(t=e.externalLink)?t:"",type:null!=(a=e.type)?a:"buyNow",price:e.price,likeCount:e.likeCount,isLike:e.isLike,listingId:null!=(r=e.listingId)?r:null,properties:(e.properties||[]).map(e=>{var t,a,r,n,o,i;return{type:e.type,name:e.name,supply:null!=(t=e.supply)?t:0,blockchain:null!=(a=e.blockchain)?a:"",tokenId:null!=(r=e.tokenId)?r:"",contractAddress:null!=(n=e.contractAddress)?n:"",tokenURI:null!=(o=e.tokenURI)?o:null,isFreeze:null!=(i=e.isFreeze)&&i}}),creator:Array.isArray(e.creator)?e.creator:[],tokenURI:null!=(n=e.tokenURI)?n:null,isFreeze:null!=(o=e.isFreeze)&&o,creators:Array.isArray(e.creator)?e.creator.map(e=>e.addressWallet):[]}})),en=[];return("owned"===Q&&(en=et),"created"===Q&&(en=ee),"collection"===Q&&(en=er),E)?(0,r.jsxs)(o.A,{sx:{minHeight:"100vh",width:"100%",justifyContent:"center",alignItems:"center",background:"linear-gradient(120deg,#12192b,#182858,#341a57)",px:4,py:6},spacing:4,children:[(0,r.jsx)(i.A,{color:"secondary"}),(0,r.jsx)(s.A,{sx:{color:"#fff",fontWeight:600},children:"Đang tải dữ liệu creator..."}),(0,r.jsx)(l.A,{container:!0,spacing:3,sx:{mt:4},children:Array.from({length:6}).map((e,t)=>(0,r.jsxs)(l.A,{size:{xs:12,sm:6,md:4},children:[(0,r.jsx)(d.A,{variant:"rectangular",width:"100%",height:250,sx:{borderRadius:3,background:"linear-gradient(135deg,#282c44,#3a3970)"},animation:"wave"}),(0,r.jsx)(d.A,{variant:"text",width:"60%",sx:{mt:1,background:"linear-gradient(135deg,#7a3bff,#b78eff)"},animation:"wave"}),(0,r.jsx)(d.A,{variant:"text",width:"40%",sx:{background:"linear-gradient(135deg,#7a3bff,#b78eff)"},animation:"wave"})]},t))})]}):N||!B?(0,r.jsx)(s.A,{sx:{color:"#fff",textAlign:"center",py:10},children:"User not found"}):(0,r.jsxs)(o.A,{position:"relative",sx:{overflow:"hidden",minHeight:"100vh"},children:[(0,r.jsx)(c.default,{sx:{position:"absolute",inset:0,background:"linear-gradient(120deg,#12192b,#182858,#341a57)",zIndex:1,mt:37.5,borderTopLeftRadius:15,borderTopRightRadius:15}}),(0,r.jsxs)(c.default,{sx:{position:"relative",width:"100%",color:"#fff"},children:[(0,r.jsx)(c.default,{sx:{width:"100%",height:320,backgroundSize:"cover",backgroundPosition:"center",filter:"brightness(0.6)",zIndex:12},children:(0,r.jsx)(I.A,{type:"banner",src:B.background?"".concat($,"/api/upload/").concat(B.background):null})}),(0,r.jsxs)(u.A,{onClick:a,sx:{position:"absolute",top:20,left:20,background:"rgba(0,0,0,0.4)",color:"#fff",textTransform:"none",borderRadius:2,zIndex:14,"&:hover":{background:"rgba(0,0,0,0.6)"}},children:[(0,r.jsx)(A.A,{fontSize:"small",sx:{mr:1}})," Quay lại"]}),(0,r.jsxs)(c.default,{sx:{px:6,mt:-10,position:"relative",zIndex:14},children:[(0,r.jsxs)(o.A,{direction:"row",spacing:4,alignItems:"flex-start",sx:{mt:-8,px:7,position:"relative"},children:[(0,r.jsx)(I.A,{type:"avatar",src:B.avatar?"".concat($,"/api/upload/").concat(B.avatar):null,size:120}),(0,r.jsxs)(c.default,{children:[(0,r.jsx)(s.A,{variant:"h5",sx:{fontWeight:800,color:"#fff"},children:B.fullName}),(0,r.jsxs)(o.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsx)(s.A,{sx:{color:"#A0A0C0",fontSize:"1rem"},children:(e=>e?e.slice(0,6)+"..."+e.slice(-4):"")(B.addressWallet)}),(0,r.jsx)(g.A,{title:"Copy Wallet Address",children:(0,r.jsx)(y.A,{sx:{fontSize:15,color:"#A0A0C0",cursor:"pointer","&:hover":{color:"#fff"}},onClick:()=>navigator.clipboard.writeText(B.addressWallet)})})]}),(0,r.jsxs)(o.A,{direction:"row",spacing:2,sx:{mt:3,alignItems:"center"},children:[(0,r.jsx)(u.A,{variant:"contained",sx:{textTransform:"none",background:G?"linear-gradient(90deg, #ccc, #aaa)":"linear-gradient(90deg,#7a3bff,#b78eff)"},disabled:B.addressWallet===(0,j.QI)()||M,onClick:()=>{B&&B.addressWallet!==(0,j.QI)()&&(J(!G),_({followingAddressWallet:B.addressWallet}).catch(()=>{J(G)}))},children:G?"Following":"Follow"}),(0,r.jsx)(u.A,{variant:"outlined",sx:{borderColor:"rgba(255,255,255,0.1)",textTransform:"none",color:"#fff"},children:"Chia sẻ"}),(0,r.jsx)(c.default,{sx:{cursor:"pointer",background:O?"#fff":"rgba(255,255,255,0.2)",borderRadius:"50%",p:1,"&:hover":{transform:"scale(1.1)"}},onClick:()=>{if(!B)return;let e={isLike:O,count:V};X(!O),Y(O?V-1:V+1),R({targetId:B.id,targetType:"artist"},{onError:()=>{X(e.isLike),Y(e.count)}})},children:O?(0,r.jsx)(T.A,{sx:{color:"#FF4CFD"}}):(0,r.jsx)(L.A,{sx:{color:"#fff"}})}),(0,r.jsx)(s.A,{sx:{color:"#fff",ml:1},children:V}),(0,r.jsxs)(o.A,{direction:"row",spacing:1,sx:{mt:1},children:[(0,r.jsx)(k.A,{sx:{color:"#cfcfff",cursor:"pointer"}}),(0,r.jsx)(w.A,{sx:{color:"#cfcfff",cursor:"pointer"}})]})]}),(0,r.jsx)(s.A,{sx:{color:"#CFCFFF",my:5,maxWidth:800,ml:-25},children:B.bio||"No bio yet."})]})]}),(0,r.jsx)(c.default,{sx:{display:"flex",alignItems:"center",mb:3},children:(0,r.jsxs)(f.A,{value:D,onChange:(e,t)=>{K(t),0===t&&q("created"),1===t&&q("owned"),2===t&&q("collection")},textColor:"secondary",indicatorColor:"secondary",sx:{flex:1},children:[(0,r.jsx)(p.A,{label:"Đ\xe3 tạo"}),(0,r.jsx)(p.A,{label:"Sở hữu"}),(0,r.jsx)(p.A,{label:"Bộ sưu tập"})]})}),(0,r.jsx)(l.A,{container:!0,spacing:3,sx:{mt:3,px:4,position:"relative",zIndex:14},children:en.length>0?en.map(e=>(0,r.jsx)(l.A,{size:{xs:12,sm:6,md:4},children:(0,r.jsxs)(x.A,{sx:{bgcolor:"rgba(255,255,255,0.03)",borderRadius:3,overflow:"hidden",boxShadow:"0 0 20px rgba(0,0,0,0.4)"},children:[(0,r.jsx)(h.A,{component:"img",height:"250",image:"https://gateway.pinata.cloud/ipfs/".concat(e.image),alt:e.name,sx:{objectFit:"cover"},loading:"lazy"}),(0,r.jsxs)(m.A,{children:[(0,r.jsx)(s.A,{sx:{color:"#fff",fontWeight:600},children:e.name}),(0,r.jsxs)(s.A,{sx:{color:"#b78eff",mt:1},children:["Price: ",e.price," ETH"]}),(0,r.jsxs)(s.A,{sx:{color:"#A0A0C0",mt:.5},children:["Likes: ",e.likeCount," |"," ",e.isLike?"Liked":"Not liked"]}),(0,r.jsx)(u.A,{fullWidth:!0,variant:"contained",sx:{mt:2,background:"linear-gradient(90deg,#8b5cf6,#7c3aed)",textTransform:"none",borderRadius:2},onClick:()=>{Z.mutate({listingId:e.listingId,quantity:1,sellerAddress:"buyNow",paymentToken:"ETH",highestBidder:"",finalPrice:"",winnerAddress:"",endTime:void 0})},children:"Buy"})]})]})},e.id)):Array.from({length:6}).map((e,t)=>(0,r.jsxs)(l.A,{size:{xs:12,sm:6,md:4},children:[(0,r.jsx)(d.A,{variant:"rectangular",width:"100%",height:250,sx:{borderRadius:3,background:"linear-gradient(135deg,#282c44,#3a3970)"},animation:"wave"}),(0,r.jsx)(d.A,{variant:"text",width:"60%",sx:{mt:1,background:"linear-gradient(135deg,#7a3bff,#b78eff)"},animation:"wave"}),(0,r.jsx)(d.A,{variant:"text",width:"40%",sx:{background:"linear-gradient(135deg,#7a3bff,#b78eff)"},animation:"wave"})]},t))})]})]})]})};function S(){var e;let t=(0,b.useRouter)(),a=(0,b.useParams)(),n=null!=(e=null==a?void 0:a.addressWallet)?e:"";return(0,r.jsx)(P,{onBack:()=>t.push("/profile"),addressWallet:n})}}}]);